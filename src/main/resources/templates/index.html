<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" lang="fr">
<head>
    <meta charset="UTF-8">
    <title>Gestion des ventes - Multi RÃ©gions</title>
    <link rel="stylesheet"
          href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css">
</head>
<body class="container py-5">

<h2 class="text-center mb-4">ðŸ›’ Gestion des ventes multi-rÃ©gions</h2>

<!-- Messages -->
<div th:if="${success}" class="alert alert-success" th:text="${success}"></div>
<div th:if="${error}" class="alert alert-danger" th:text="${error}"></div>

<!-- Formulaire -->
<form th:action="@{/web/add}" th:object="${newVente}" method="post" class="card p-4 shadow-sm">
    <div class="mb-3">
        <label class="form-label">Produit</label>
        <input type="text" th:field="*{produit}" class="form-control" placeholder="Nom du produit" required>
    </div>

    <div class="mb-3">
        <label class="form-label">Montant</label>
        <input type="number" th:field="*{montant}" step="0.01" class="form-control" placeholder="Prix" required>
    </div>

    <div class="mb-3">
        <label class="form-label">Date de vente</label>
        <input type="date" th:field="*{dateVente}" class="form-control" required>
    </div>

    <div class="mb-3">
        <label class="form-label">RÃ©gion</label>
        <select name="region" class="form-select" required>
            <option value="dakar">Dakar</option>
            <option value="thies">ThiÃ¨s</option>
            <option value="saint-louis">Saint-Louis</option>
        </select>
    </div>

    <button type="submit" class="btn btn-primary w-100">Ajouter la vente</button>
</form>

<!-- Tableau -->
<h3 class="mt-5 mb-3">ðŸ“‹ Liste des ventes</h3>

<table class="table table-striped table-bordered">
    <thead class="table-dark">
    <tr>
        <th>ID</th>
        <th>Produit</th>
        <th>Montant</th>
        <th>Date</th>
        <th>RÃ©gion</th>
        <th>Mis Ã  jour le</th> <!-- âœ… Ajout du champ updatedAt -->
    </tr>
    </thead>
    <tbody>
    <tr th:each="vente : ${ventes}">
        <td th:text="${vente.id}"></td>
        <td th:text="${vente.produit}"></td>
        <td th:text="${vente.montant}"></td>
        <td th:text="${vente.dateVente}"></td>
        <td th:text="${vente.region}"></td>
        <td th:text="${vente.updatedAt}"></td>
    </tr>
    </tbody>
</table>

<!-- Bouton synchronisation -->
<form th:action="@{/web/sync-manual}" method="post" class="mt-3">
    <button type="submit" class="btn btn-success">ðŸ”„ Synchroniser manuellement</button>
</form>

</body>
</html>